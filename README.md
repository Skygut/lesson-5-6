# AWS EKS Infrastructure with Terraform

–¶–µ–π –ø—Ä–æ—î–∫—Ç —Å—Ç–≤–æ—Ä—é—î **VPC** —Ç–∞ **EKS –∫–ª–∞—Å—Ç–µ—Ä** –≤ AWS –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é Terraform.  
–Ü–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º—ñ–Ω—ñ–º–∞–ª—ñ—Å—Ç–∏—á–Ω–∞:  
- VPC –∑ –ø—É–±–ª—ñ—á–Ω–∏–º–∏ —Ç–∞ –ø—Ä–∏–≤–∞—Ç–Ω–∏–º–∏ –ø—ñ–¥–º–µ—Ä–µ–∂–∞–º–∏  
- EKS –∫–ª–∞—Å—Ç–µ—Ä –∑ **–¥–≤–æ–º–∞ node group**:
  - `main-ng` ‚Üí `t3.medium`, **ON_DEMAND**
  - `cheap-ng` ‚Üí `t3.micro`, **SPOT**  
- –£–≤—ñ–º–∫–Ω–µ–Ω–æ **IRSA** –¥–ª—è –º–∞–π–±—É—Ç–Ω—å–æ—ó —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó IAM Roles for Service Accounts  

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É
    ```
    .
    ‚îú‚îÄ‚îÄ vpc/ # –º–æ–¥—É–ª—å –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è VPC 
    ‚îú‚îÄ‚îÄ eks/ # –º–æ–¥—É–ª—å –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è EKS
    ‚îú‚îÄ‚îÄ root/main.tf # –ø—ñ–¥–∫–ª—é—á–∞—î VPC —Ç–∞ EKS —Ä–∞–∑–æ–º
    ‚îú‚îÄ‚îÄ root/variables.tf # –≥–ª–æ–±–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ
    ‚îú‚îÄ‚îÄ root/outputs.tf # –∫–ª—é—á–æ–≤—ñ outputs (VPC + EKS + kubeconfig)
    ‚îî‚îÄ‚îÄ README.md # —Ü–µ–π —Ñ–∞–π–ª

---

## –ó–∞–ø—É—Å–∫

1. –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞

- –í—Å—Ç–∞–Ω–æ–≤–∏ [Terraform](https://developer.hashicorp.com/terraform/downloads) (>= 1.5.0).  
- –ù–∞–ª–∞—à—Ç—É–π AWS CLI –∑ –ø—Ä–∞–≤–∞–º–∏ –Ω–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤:  
   ```
   aws configure

2. –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è

    ```
    terraform init -upgrade

3. –ü–µ—Ä–µ–≥–ª—è–¥ –ø–ª–∞–Ω—É

    ```
    terraform plan

4. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏

    ```
    terraform apply -auto-approve

5. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ –∫–ª–∞—Å—Ç–µ—Ä —Å—Ç–≤–æ—Ä–µ–Ω–æ:

    ```
    aws eks --region <region> update-kubeconfig --name <your-cluster-name>`
    kubectl get nodes

6. –í–∏–¥–∞–ª–µ–Ω–Ω—è —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏

    ```
    terraform destroy -auto-approve

7. –í–∏–¥–∞–ª–µ–Ω–Ω—è –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ–π —ñ —Ñ–∞–π–ª—ñ–≤ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ, –±–µ–∑ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è  

    ```
    rm -rf .terraform .terraform.lock.hcl    

–ü—Ä–∏–º—ñ—Ç–∫–∏:

–í–∞—Ä—Ç—ñ—Å—Ç—å —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –≤–∏–±—Ä–∞–Ω–∏—Ö —ñ–Ω—Å—Ç–∞–Ω—Å—ñ–≤.

–î–ª—è –µ–∫–æ–Ω–æ–º—ñ—ó cheap node group —Å—Ç–∞—Ä—Ç—É—î –∑ 0 –Ω–æ–¥.

IRSA –≤–∂–µ —É–≤—ñ–º–∫–Ω–µ–Ω–æ, –º–æ–∂–Ω–∞ –¥–æ–¥–∞–≤–∞—Ç–∏ IAM Roles for Service Accounts.